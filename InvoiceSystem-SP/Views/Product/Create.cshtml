@model InvoiceSystem_SP.Models.Product

@{
    ViewBag.Title = "Create New Product";
}

<h2>Create New Product</h2>

@using (Html.BeginForm("Create", "Product", FormMethod.Post, new { id = "productForm" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Product Details</h4>
        <hr />

        <div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control", id = "txtName" } })
                <span id="nameError" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Price, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Price, new { htmlAttributes = new { @class = "form-control", id = "txtPrice" } })
                <span id="priceError" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create Product" class="btn btn-primary" />
            </div>
        </div>
    </div>
}



@section Scripts {
    <script>
        $(document).ready(function () {
            $('#productForm').submit(function (e) {

                var isValid = true;

                $('.text-danger').text('');

                if ($('#txtName').val().trim() === '') {
                    $('#nameError').text('Product Name is required.');
                    isValid = false;
                }

                var price = $('#txtPrice').val().trim();

                if (price === '') {
                    $('#priceError').text('Price is required.');
                    isValid = false;
                } else if (isNaN(price) || parseFloat(price) <= 0) {
                    $('#priceError').text('Please enter a valid price (must be a positive number).');
                    isValid = false;
                }

                if (!isValid) {
                    e.preventDefault();
                }
            });
        });
    </script>
}